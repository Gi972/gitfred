function diff_match_patch(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;function _objectWithoutProperties(t,e){if(null==t)return{};var n,i,r=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(t);for(i=0;i<h.length;i++)n=h[i],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var n,i,r={},h=Object.keys(t);for(i=0;i<h.length;i++)n=h[i],0<=e.indexOf(n)||(r[n]=t[n]);return r}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(t,e,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[DIFF_EQUAL,t]]:[];void 0===n&&(n=!0);var h=n,f=this.diff_commonPrefix(t,e),a=t.substring(0,f);t=t.substring(f),e=e.substring(f),f=this.diff_commonSuffix(t,e);var s=t.substring(t.length-f);t=t.substring(0,t.length-f),e=e.substring(0,e.length-f);var o=this.diff_compute_(t,e,h,r);return a&&o.unshift([DIFF_EQUAL,a]),s&&o.push([DIFF_EQUAL,s]),this.diff_cleanupMerge(o),o},diff_match_patch.prototype.diff_compute_=function(t,e,n,i){var r;if(!t)return[[DIFF_INSERT,e]];if(!e)return[[DIFF_DELETE,t]];var h=t.length>e.length?t:e,f=t.length>e.length?e:t,a=h.indexOf(f);if(-1!=a)return r=[[DIFF_INSERT,h.substring(0,a)],[DIFF_EQUAL,f],[DIFF_INSERT,h.substring(a+f.length)]],t.length>e.length&&(r[0][0]=r[2][0]=DIFF_DELETE),r;if(1==f.length)return[[DIFF_DELETE,t],[DIFF_INSERT,e]];var s=this.diff_halfMatch_(t,e);if(s){var o=s[0],c=s[1],l=s[2],g=s[3],_=s[4],u=this.diff_main(o,l,n,i),p=this.diff_main(c,g,n,i);return u.concat([[DIFF_EQUAL,_]],p)}return n&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},diff_match_patch.prototype.diff_lineMode_=function(t,e,n){t=(c=this.diff_linesToChars_(t,e)).chars1,e=c.chars2;var i=c.lineArray,r=this.diff_main(t,e,!1,n);this.diff_charsToLines_(r,i),this.diff_cleanupSemantic(r),r.push([DIFF_EQUAL,""]);for(var h=0,f=0,a=0,s="",o="";h<r.length;){switch(r[h][0]){case DIFF_INSERT:a++,o+=r[h][1];break;case DIFF_DELETE:f++,s+=r[h][1];break;case DIFF_EQUAL:if(1<=f&&1<=a){r.splice(h-f-a,f+a),h=h-f-a;for(var c,l=(c=this.diff_main(s,o,!1,n)).length-1;0<=l;l--)r.splice(h,0,c[l]);h+=c.length}f=a=0,o=s=""}h++}return r.pop(),r},diff_match_patch.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,r=e.length,h=Math.ceil((i+r)/2),f=h,a=2*h,s=new Array(a),o=new Array(a),c=0;c<a;c++)s[c]=-1,o[c]=-1;s[f+1]=0;for(var l=i-r,g=l%2!=(o[f+1]=0),_=0,u=0,p=0,d=0,m=0;m<h&&!((new Date).getTime()>n);m++){for(var F=-m+_;F<=m-u;F+=2){for(var E=f+F,b=(y=F==-m||F!=m&&s[E-1]<s[E+1]?s[E+1]:s[E-1]+1)-F;y<i&&b<r&&t.charAt(y)==e.charAt(b);)y++,b++;if(i<(s[E]=y))u+=2;else if(r<b)_+=2;else if(g){if(0<=(v=f+l-F)&&v<a&&-1!=o[v])if((D=i-o[v])<=y)return this.diff_bisectSplit_(t,e,y,b,n)}}for(var I=-m+p;I<=m-d;I+=2){for(var D,v=f+I,T=(D=I==-m||I!=m&&o[v-1]<o[v+1]?o[v+1]:o[v-1]+1)-I;D<i&&T<r&&t.charAt(i-D-1)==e.charAt(r-T-1);)D++,T++;if(i<(o[v]=D))d+=2;else if(r<T)p+=2;else if(!g){if(0<=(E=f+l-I)&&E<a&&-1!=s[E]){var y;b=f+(y=s[E])-E;if((D=i-D)<=y)return this.diff_bisectSplit_(t,e,y,b,n)}}}}return[[DIFF_DELETE,t],[DIFF_INSERT,e]]},diff_match_patch.prototype.diff_bisectSplit_=function(t,e,n,i,r){var h=t.substring(0,n),f=e.substring(0,i),a=t.substring(n),s=e.substring(i),o=this.diff_main(h,f,!1,r),c=this.diff_main(a,s,!1,r);return o.concat(c)},diff_match_patch.prototype.diff_linesToChars_=function(t,e){var f=[],a={};function n(t){for(var e="",n=0,i=-1,r=f.length;i<t.length-1;){-1==(i=t.indexOf("\n",n))&&(i=t.length-1);var h=t.substring(n,i+1);n=i+1,(a.hasOwnProperty?a.hasOwnProperty(h):void 0!==a[h])?e+=String.fromCharCode(a[h]):(e+=String.fromCharCode(r),a[h]=r,f[r++]=h)}return e}return f[0]="",{chars1:n(t),chars2:n(e),lineArray:f}},diff_match_patch.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],h=0;h<i.length;h++)r[h]=e[i.charCodeAt(h)];t[n][1]=r.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,h=0;n<r;)t.substring(h,r)==e.substring(h,r)?h=n=r:i=r,r=Math.floor((i-n)/2+n);return r},diff_match_patch.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,h=0;n<r;)t.substring(t.length-r,t.length-h)==e.substring(e.length-r,e.length-h)?h=n=r:i=r,r=Math.floor((i-n)/2+n);return r},diff_match_patch.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;i<n?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var h=0,f=1;;){var a=t.substring(r-f),s=e.indexOf(a);if(-1==s)return h;f+=s,0!=s&&t.substring(r-f)!=e.substring(0,f)||(h=f,f++)}},diff_match_patch.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var g=this;function r(t,e,n){for(var i,r,h,f,a=t.substring(n,n+Math.floor(t.length/4)),s=-1,o="";-1!=(s=e.indexOf(a,s+1));){var c=g.diff_commonPrefix(t.substring(n),e.substring(s)),l=g.diff_commonSuffix(t.substring(0,n),e.substring(0,s));o.length<l+c&&(o=e.substring(s-l,s)+e.substring(s,s+c),i=t.substring(0,n-l),r=t.substring(n+c),h=e.substring(0,s-l),f=e.substring(s+c))}return 2*o.length>=t.length?[i,r,h,f,o]:null}var h,f,a,s,o,c=r(n,i,Math.ceil(n.length/4)),l=r(n,i,Math.ceil(n.length/2));return c||l?(h=l?c&&c[4].length>l[4].length?c:l:c,t.length>e.length?(f=h[0],a=h[1],s=h[2],o=h[3]):(s=h[0],o=h[1],f=h[2],a=h[3]),[f,a,s,o,h[4]]):null},diff_match_patch.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,r=null,h=0,f=0,a=0,s=0,o=0;h<t.length;)t[h][0]==DIFF_EQUAL?(f=s,a=o,o=s=0,r=t[n[i++]=h][1]):(t[h][0]==DIFF_INSERT?s+=t[h][1].length:o+=t[h][1].length,r&&r.length<=Math.max(f,a)&&r.length<=Math.max(s,o)&&(t.splice(n[i-1],0,[DIFF_DELETE,r]),t[n[i-1]+1][0]=DIFF_INSERT,i--,h=0<--i?n[i-1]:-1,o=s=a=f=0,e=!(r=null))),h++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),h=1;h<t.length;){if(t[h-1][0]==DIFF_DELETE&&t[h][0]==DIFF_INSERT){var c=t[h-1][1],l=t[h][1],g=this.diff_commonOverlap_(c,l),_=this.diff_commonOverlap_(l,c);_<=g?(g>=c.length/2||g>=l.length/2)&&(t.splice(h,0,[DIFF_EQUAL,l.substring(0,g)]),t[h-1][1]=c.substring(0,c.length-g),t[h+1][1]=l.substring(g),h++):(_>=c.length/2||_>=l.length/2)&&(t.splice(h,0,[DIFF_EQUAL,c.substring(0,_)]),t[h-1][0]=DIFF_INSERT,t[h-1][1]=l.substring(0,l.length-_),t[h+1][0]=DIFF_DELETE,t[h+1][1]=c.substring(_),h++),h++}h++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),r=n.match(diff_match_patch.nonAlphaNumericRegex_),h=i.match(diff_match_patch.nonAlphaNumericRegex_),f=r&&n.match(diff_match_patch.whitespaceRegex_),a=h&&i.match(diff_match_patch.whitespaceRegex_),s=f&&n.match(diff_match_patch.linebreakRegex_),o=a&&i.match(diff_match_patch.linebreakRegex_),c=s&&t.match(diff_match_patch.blanklineEndRegex_),l=o&&e.match(diff_match_patch.blanklineStartRegex_);return c||l?5:s||o?4:r&&!f&&a?3:f||a?2:r||h?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==DIFF_EQUAL&&t[n+1][0]==DIFF_EQUAL){var i=t[n-1][1],r=t[n][1],h=t[n+1][1],f=this.diff_commonSuffix(i,r);if(f){var a=r.substring(r.length-f);i=i.substring(0,i.length-f),r=a+r.substring(0,r.length-f),h=a+h}for(var s=i,o=r,c=h,l=e(i,r)+e(r,h);r.charAt(0)===h.charAt(0);){i+=r.charAt(0),r=r.substring(1)+h.charAt(0),h=h.substring(1);var g=e(i,r)+e(r,h);l<=g&&(l=g,s=i,o=r,c=h)}t[n-1][1]!=s&&(s?t[n-1][1]=s:(t.splice(n-1,1),n--),t[n][1]=o,c?t[n+1][1]=c:(t.splice(n+1,1),n--))}n++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,diff_match_patch.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,r=null,h=0,f=!1,a=!1,s=!1,o=!1;h<t.length;)t[h][0]==DIFF_EQUAL?(r=t[h][1].length<this.Diff_EditCost&&(s||o)?(f=s,a=o,t[n[i++]=h][1]):(i=0,null),s=o=!1):(t[h][0]==DIFF_DELETE?o=!0:s=!0,r&&(f&&a&&s&&o||r.length<this.Diff_EditCost/2&&f+a+s+o==3)&&(t.splice(n[i-1],0,[DIFF_DELETE,r]),t[n[i-1]+1][0]=DIFF_INSERT,i--,r=null,f&&a?(s=o=!0,i=0):(h=0<--i?n[i-1]:-1,s=o=!1),e=!0)),h++;e&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_cleanupMerge=function(t){t.push([DIFF_EQUAL,""]);for(var e,n=0,i=0,r=0,h="",f="";n<t.length;)switch(t[n][0]){case DIFF_INSERT:r++,f+=t[n][1],n++;break;case DIFF_DELETE:i++,h+=t[n][1],n++;break;case DIFF_EQUAL:1<i+r?(0!==i&&0!==r&&(0!==(e=this.diff_commonPrefix(f,h))&&(0<n-i-r&&t[n-i-r-1][0]==DIFF_EQUAL?t[n-i-r-1][1]+=f.substring(0,e):(t.splice(0,0,[DIFF_EQUAL,f.substring(0,e)]),n++),f=f.substring(e),h=h.substring(e)),0!==(e=this.diff_commonSuffix(f,h))&&(t[n][1]=f.substring(f.length-e)+t[n][1],f=f.substring(0,f.length-e),h=h.substring(0,h.length-e))),0===i?t.splice(n-r,i+r,[DIFF_INSERT,f]):0===r?t.splice(n-i,i+r,[DIFF_DELETE,h]):t.splice(n-i-r,i+r,[DIFF_DELETE,h],[DIFF_INSERT,f]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&t[n-1][0]==DIFF_EQUAL?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=r=0,f=h=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)t[n-1][0]==DIFF_EQUAL&&t[n+1][0]==DIFF_EQUAL&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,h=0,f=0;for(n=0;n<t.length&&(t[n][0]!==DIFF_INSERT&&(i+=t[n][1].length),t[n][0]!==DIFF_DELETE&&(r+=t[n][1].length),!(e<i));n++)h=i,f=r;return t.length!=n&&t[n][0]===DIFF_DELETE?f:f+(e-h)},diff_match_patch.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,h=/\n/g,f=0;f<t.length;f++){var a=t[f][0],s=t[f][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(h,"&para;<br>");switch(a){case DIFF_INSERT:e[f]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case DIFF_DELETE:e[f]='<del style="background:#ffe6e6;">'+s+"</del>";break;case DIFF_EQUAL:e[f]="<span>"+s+"</span>"}}return e.join("")},diff_match_patch.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==DIFF_INSERT&&(e[n]=t[n][1]);return e.join("")},diff_match_patch.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==DIFF_DELETE&&(e[n]=t[n][1]);return e.join("")},diff_match_patch.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var h=t[r][0],f=t[r][1];switch(h){case DIFF_INSERT:n+=f.length;break;case DIFF_DELETE:i+=f.length;break;case DIFF_EQUAL:e+=Math.max(n,i),i=n=0}}return e+=Math.max(n,i)},diff_match_patch.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case DIFF_INSERT:e[n]="+"+encodeURI(t[n][1]);break;case DIFF_DELETE:e[n]="-"+t[n][1].length;break;case DIFF_EQUAL:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,h=e.split(/\t/g),f=0;f<h.length;f++){var a=h[f].substring(1);switch(h[f].charAt(0)){case"+":try{n[i++]=[DIFF_INSERT,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var s=parseInt(a,10);if(isNaN(s)||s<0)throw new Error("Invalid number in diff_fromDelta: "+a);var o=t.substring(r,r+=s);"="==h[f].charAt(0)?n[i++]=[DIFF_EQUAL,o]:n[i++]=[DIFF_DELETE,o];break;default:if(h[f])throw new Error("Invalid diff operation in diff_fromDelta: "+h[f])}}if(r!=t.length)throw new Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return n},diff_match_patch.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},diff_match_patch.prototype.match_bitap_=function(t,r,h){if(r.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var e=this.match_alphabet_(r),f=this;function n(t,e){var n=t/r.length,i=Math.abs(h-e);return f.Match_Distance?n+i/f.Match_Distance:i?1:n}var i=this.Match_Threshold,a=t.indexOf(r,h);-1!=a&&(i=Math.min(n(0,a),i),-1!=(a=t.lastIndexOf(r,h+r.length))&&(i=Math.min(n(0,a),i)));var s,o,c=1<<r.length-1;a=-1;for(var l,g=r.length+t.length,_=0;_<r.length;_++){for(s=0,o=g;s<o;)n(_,h+o)<=i?s=o:g=o,o=Math.floor((g-s)/2+s);g=o;var u=Math.max(1,h-o+1),p=Math.min(h+o,t.length)+r.length,d=Array(p+2);d[p+1]=(1<<_)-1;for(var m=p;u<=m;m--){var F=e[t.charAt(m-1)];if(d[m]=0===_?(d[m+1]<<1|1)&F:(d[m+1]<<1|1)&F|(l[m+1]|l[m])<<1|1|l[m+1],d[m]&c){var E=n(_,m-1);if(E<=i){if(i=E,!(h<(a=m-1)))break;u=Math.max(1,2*h-a)}}}if(n(_+1,h)>i)break;l=d}return a},diff_match_patch.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},diff_match_patch.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var r=e.substring(t.start2-i,t.start2);r&&t.diffs.unshift([DIFF_EQUAL,r]);var h=e.substring(t.start2+t.length1,t.start2+t.length1+i);h&&t.diffs.push([DIFF_EQUAL,h]),t.start1-=r.length,t.start2-=r.length,t.length1+=r.length+h.length,t.length2+=r.length+h.length}},diff_match_patch.prototype.patch_make=function(t,e,n){var i,r;if("string"==typeof t&&"string"==typeof e&&void 0===n)i=t,2<(r=this.diff_main(i,e,!0)).length&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)r=t,i=this.diff_text1(r);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)i=t,r=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");i=t,r=n}if(0===r.length)return[];for(var h=[],f=new diff_match_patch.patch_obj,a=0,s=0,o=0,c=i,l=i,g=0;g<r.length;g++){var _=r[g][0],u=r[g][1];switch(a||_===DIFF_EQUAL||(f.start1=s,f.start2=o),_){case DIFF_INSERT:f.diffs[a++]=r[g],f.length2+=u.length,l=l.substring(0,o)+u+l.substring(o);break;case DIFF_DELETE:f.length1+=u.length,f.diffs[a++]=r[g],l=l.substring(0,o)+l.substring(o+u.length);break;case DIFF_EQUAL:u.length<=2*this.Patch_Margin&&a&&r.length!=g+1?(f.diffs[a++]=r[g],f.length1+=u.length,f.length2+=u.length):u.length>=2*this.Patch_Margin&&a&&(this.patch_addContext_(f,c),h.push(f),f=new diff_match_patch.patch_obj,a=0,c=l,s=o)}_!==DIFF_INSERT&&(s+=u.length),_!==DIFF_DELETE&&(o+=u.length)}return a&&(this.patch_addContext_(f,c),h.push(f)),h},diff_match_patch.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=new diff_match_patch.patch_obj;r.diffs=[];for(var h=0;h<i.diffs.length;h++)r.diffs[h]=i.diffs[h].slice();r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,e[n]=r}return e},diff_match_patch.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],h=0;h<t.length;h++){var f,a,s=t[h].start2+i,o=this.diff_text1(t[h].diffs),c=-1;if(o.length>this.Match_MaxBits?-1!=(f=this.match_main(e,o.substring(0,this.Match_MaxBits),s))&&(-1==(c=this.match_main(e,o.substring(o.length-this.Match_MaxBits),s+o.length-this.Match_MaxBits))||c<=f)&&(f=-1):f=this.match_main(e,o,s),-1==f)r[h]=!1,i-=t[h].length2-t[h].length1;else if(r[h]=!0,i=f-s,o==(a=-1==c?e.substring(f,f+o.length):e.substring(f,c+this.Match_MaxBits)))e=e.substring(0,f)+this.diff_text2(t[h].diffs)+e.substring(f+o.length);else{var l=this.diff_main(o,a,!1);if(o.length>this.Match_MaxBits&&this.diff_levenshtein(l)/o.length>this.Patch_DeleteThreshold)r[h]=!1;else{this.diff_cleanupSemanticLossless(l);for(var g,_=0,u=0;u<t[h].diffs.length;u++){var p=t[h].diffs[u];p[0]!==DIFF_EQUAL&&(g=this.diff_xIndex(l,_)),p[0]===DIFF_INSERT?e=e.substring(0,f+g)+p[1]+e.substring(f+g):p[0]===DIFF_DELETE&&(e=e.substring(0,f+g)+e.substring(f+this.diff_xIndex(l,_+p[1].length))),p[0]!==DIFF_DELETE&&(_+=p[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),r]},diff_match_patch.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var r=t[0],h=r.diffs;if(0==h.length||h[0][0]!=DIFF_EQUAL)h.unshift([DIFF_EQUAL,n]),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>h[0][1].length){var f=e-h[0][1].length;h[0][1]=n.substring(h[0][1].length)+h[0][1],r.start1-=f,r.start2-=f,r.length1+=f,r.length2+=f}if(0==(h=(r=t[t.length-1]).diffs).length||h[h.length-1][0]!=DIFF_EQUAL)h.push([DIFF_EQUAL,n]),r.length1+=e,r.length2+=e;else if(e>h[h.length-1][1].length){f=e-h[h.length-1][1].length;h[h.length-1][1]+=n.substring(0,f),r.length1+=f,r.length2+=f}return n},diff_match_patch.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var r=i.start1,h=i.start2,f="";0!==i.diffs.length;){var a=new diff_match_patch.patch_obj,s=!0;for(a.start1=r-f.length,a.start2=h-f.length,""!==f&&(a.length1=a.length2=f.length,a.diffs.push([DIFF_EQUAL,f]));0!==i.diffs.length&&a.length1<e-this.Patch_Margin;){var o=i.diffs[0][0],c=i.diffs[0][1];o===DIFF_INSERT?(a.length2+=c.length,h+=c.length,a.diffs.push(i.diffs.shift()),s=!1):o===DIFF_DELETE&&1==a.diffs.length&&a.diffs[0][0]==DIFF_EQUAL&&c.length>2*e?(a.length1+=c.length,r+=c.length,s=!1,a.diffs.push([o,c]),i.diffs.shift()):(c=c.substring(0,e-a.length1-this.Patch_Margin),a.length1+=c.length,r+=c.length,o===DIFF_EQUAL?(a.length2+=c.length,h+=c.length):s=!1,a.diffs.push([o,c]),c==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(c.length))}f=(f=this.diff_text2(a.diffs)).substring(f.length-this.Patch_Margin);var l=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==l&&(a.length1+=l.length,a.length2+=l.length,0!==a.diffs.length&&a.diffs[a.diffs.length-1][0]===DIFF_EQUAL?a.diffs[a.diffs.length-1][1]+=l:a.diffs.push([DIFF_EQUAL,l])),s||t.splice(++n,0,a)}}},diff_match_patch.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},diff_match_patch.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var h=n[i].match(r);if(!h)throw new Error("Invalid patch string: "+n[i]);var f=new diff_match_patch.patch_obj;for(e.push(f),f.start1=parseInt(h[1],10),""===h[2]?(f.start1--,f.length1=1):"0"==h[2]?f.length1=0:(f.start1--,f.length1=parseInt(h[2],10)),f.start2=parseInt(h[3],10),""===h[4]?(f.start2--,f.length2=1):"0"==h[4]?f.length2=0:(f.start2--,f.length2=parseInt(h[4],10)),i++;i<n.length;){var a=n[i].charAt(0);try{var s=decodeURI(n[i].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+s)}if("-"==a)f.diffs.push([DIFF_DELETE,s]);else if("+"==a)f.diffs.push([DIFF_INSERT,s]);else if(" "==a)f.diffs.push([DIFF_EQUAL,s]);else{if("@"==a)break;if(""!==a)throw new Error('Invalid patch mode "'+a+'" in: '+s)}i++}}return e},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case DIFF_INSERT:t="+";break;case DIFF_DELETE:t="-";break;case DIFF_EQUAL:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},function(t,e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.gitfred=e()}("undefined"!=typeof self?self:this,function(){return function(){var t,n=[],l={NOTHING_TO_COMMIT:"NOTHING_TO_COMMIT",ON_SAVE:"s",ON_ADD:"a",ON_COMMIT:"c",ON_CHECKOUT:"co"},g={i:0,commits:{},stage:{},working:{},head:null},_=function(){return t||(t=new diff_match_patch)},u=function(t){return JSON.stringify(t)},p=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=l.log()[e];if(!i)throw new Error('There is no commit with hash "'.concat(e,'".'));return null===i.parent?n.reduce(function(t,e){return n=t,i=e,(r=_()).patch_apply(r.patch_fromText(i),n).shift();var n,i,r},i.files):t(i.parent,[i.files].concat(n))},d=function(e){return n.forEach(function(t){return t(e)})};return l.save=function(t){!function(t){if(!t)throw new Error("No `change` provided.");if(!t.filepath)throw new Error("`filepath` is required.");if(!t.content)throw new Error("`content` is required.");if("string"!=typeof t.filepath)throw new Error("`filepath` must be a string.");if("string"!=typeof t.content)throw new Error("`content` must be a string.")}(t);var e=t.filepath,n=_objectWithoutProperties(t,["filepath"]);return g.working[e]=Object.assign({},g.working[e],n),d(l.ON_SAVE),l},l.add=function(t){if(void 0===t)Object.keys(g.working).forEach(this.add);else{if(!g.working[t])throw new Error("There is no '".concat(t,"' in the working directory."));g.stage[t]=(e=g.working[t],JSON.parse(JSON.stringify(e)))}var e;return d(l.ON_ADD),l},l.commit=function(t,e){if(n=g.stage,0===Object.keys(n).length&&n.constructor===Object)return l.NOTHING_TO_COMMIT;var n,i,r,h,f,a,s="_"+ ++g.i,o=this.head(),c=null!==o?(i=u(this.staged()),r=o,h=_(),f=p(r),a=h.diff_main(f,i,!0),h.patch_toText(h.patch_make(f,i,a))):u(this.staged());return""===c?l.NOTHING_TO_COMMIT:(g.commits[s]={message:t,parent:o,files:c},e&&(g.commits[s].meta=e),g.head=s,g.stage={},d(l.ON_COMMIT),s)},l.show=function(t){var e=l.log()[t];if(!e)throw new Error('There is no commit with hash "'.concat(t,'".'));return e},l.checkout=function(t){var e;return g.head=t,g.working=(e=p(t),JSON.parse(e)),d(l.ON_CHECKOUT),l},l.staged=function(){return g.stage},l.working=function(){return g.working},l.head=function(){return g.head},l.log=function(){return g.commits},l.export=function(){return g},l.listen=function(t){n.push(t)},l.import=function(t){g=t},l.consoleLogDiff=function(t){if(!g.commits[t])throw new Error("There is no commit with hash ".concat(t,"."));-1!==g.commits[t].files.indexOf("@@")&&_().patch_fromText(g.commits[t].files).forEach(function(t){if(t.diffs){var e=t.diffs.reduce(function(t,e){return 1===e[0]&&t.colors.push("[32m"),-1===e[0]&&t.colors.push("[31m"),0===e[0]&&t.colors.push("[0m"),t.texts.push(e[1]),t},{colors:[],texts:[]});console.log.apply(console,[e.colors.join("%s")].concat(e.texts))}})},l}});